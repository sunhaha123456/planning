<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" th:href="@{/static/easyui/themes/easy.common.css}"></link>
    <script th:inline="javascript">
        var contextPath = [[@{/}]];
        var interceptorToken = [[${token}]];
        var interceptorUserId = [[${userId}]];
    </script>
    <script th:src="@{/static/easyui/easy.common.js}"></script>
    <script th:src="@{/static/easyuiMask.js}"></script>
    <script th:src="@{/static/myFun.js}"></script>
    <script th:inline="javascript">
        var openDim = new Array();

        function treeInit() {
            var result = ajaxSynchGet("user/dimensionManage/getDimensionTree", {"pid": 0});
            if (result.code == '200') {
                $('#roleMenuTree').tree({
                    lines : true,
                    multiple : false,
                    checkbox : false,
                    data : result.data,
                    onBeforeExpand: function(node) {
                        if (openDim.indexOf(node.id) == -1) {
                            open(node);
                        }
                        //return true;
                    }
//                    onSelect: function(node) {
//                        open(node);
//                    }
                });
            } else {
                alertWarn(result.msg);
            }
        }

        function open(node) {
            var result = ajaxSynchGet("user/dimensionManage/getDimensionTree", {"pid": node.id});
            if (result.code == '200') {
                openDim.push(node.id);
                $('#roleMenuTree').tree('append', {
                    parent : node.target,
                    data : result.data
                });
            } else {
                alertWarn(result.msg);
            }
        }

        function addDimShow() {

        }

        function commitSave() {
            var dimName = $('#editDimName').val();
            var dataType = $("input[name='editDataType']:checked").val();

            alert(dimName + "   " + dataType);
        }

        $(function () {
            treeInit();
        });
    </script>
</head>
<body>
<table id="manager">
    <div id="manager_tool">
        <div style="margin-bottom:5px;">
            <a href="#" class="easyui-linkbutton" iconCls="icon-add-green" plain="true" onclick="addDimShow()">新增</a>
            <a href="#" class="easyui-linkbutton" iconCls="icon-tip" plain="true" onclick="deleteDim()">删除</a>
        </div>

        <!--/*
        <div style="padding:0 0 0 7px;color:#333;">
            角色名：<input type="text" class="textbox" id="unameSearch" style="width:110px" />
            <a href="#" class="easyui-linkbutton" iconCls="icon-search" onclick="searchRole()">查询</a>
        </div>
        */-->

        <div>
            <div style="float:left; width: 50%">
                <ul id="roleMenuTree"/>
            </div>
            <div style="float:left; width: 50%">
                <p>维度名称：<input id="editDimName" type="text" style="width:200px;" /></p>
                <p>数据类别：<input name="editDataType" type="radio" value="1" checked="checked">数值</input><input name="editDataType" type="radio" value="2">文本</input></p>
                <p><input type="button" value="保存" onclick="commitSave()" /></p>
            </div>
            <div style="clear:both;"></div>
        </div>
    </div>
</table>

</body>
</html>